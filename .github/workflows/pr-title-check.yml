name: PR Title Check

on:
  pull_request:
    types: [opened, edited, synchronize, reopened]
    branches: [main]

jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - name: Validate PR title
        uses: actions/github-script@v7
        with:
          script: |
            const title = context.payload.pull_request.title;
            const regex = /^(feat|fix|refactor|chore|docs|test|ci|perf|build)(\([^)]+\))?(\!)?: .+/;
            if (!regex.test(title)) {
              core.setFailed(
                'PR title must follow Conventional Commits format.\n' +
                'Example: feat: add release orchestrator or feat(ci): add checks'
              );
            }
